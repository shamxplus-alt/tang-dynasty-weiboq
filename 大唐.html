<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§å”æœç´¢ - ç››ä¸–å›¾é‰´</title>
    <style>
        /* --- 1. åŸºç¡€æ ·å¼ --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f2f5; /* æ›´ç°ä»£çš„æµ…ç°èƒŒæ™¯ */
            margin: 0;
            padding-top: 70px;
        }

        /* --- 2. é¡¶éƒ¨å¯¼èˆªæ  --- */
        .navbar {
            background-color: #fff;
            height: 60px;
            width: 100%;
            position: fixed;
            top: 0;
            z-index: 1000;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-content {
            width: 1000px;
            display: flex;
            align-items: center;
            padding: 0 10px;
        }

        .logo {
            font-size: 26px;
            font-weight: 900;
            color: #fa7d3c;
            margin-right: 40px;
            cursor: pointer;
        }

        .search-box {
            flex-grow: 1;
            position: relative;
            max-width: 500px;
        }

        .search-input {
            width: 100%;
            height: 38px;
            padding: 0 15px;
            border: 1px solid #e0e0e0;
            background-color: #f0f2f5;
            border-radius: 20px;
            outline: none;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            background-color: #fff;
            border-color: #fa7d3c;
        }

        .search-btn {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #fa7d3c;
            cursor: pointer;
            font-weight: bold;
        }

        /* --- 3. å¸ƒå±€ç»“æ„ --- */
        .container {
            width: 1000px;
            margin: 0 auto;
            display: flex;
            gap: 20px;
            padding: 0 10px;
        }

        .main-feed {
            flex: 2.2; /* ç¨å¾®åŠ å®½å·¦ä¾§ */
        }

        .sidebar {
            flex: 1;
        }

        /* --- 4. åˆ†ç±»æ ‡ç­¾æ  (æ–°å¢) --- */
        .category-bar {
            background: #fff;
            padding: 15px 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            display: flex;
            gap: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .cat-btn {
            border: none;
            background: none;
            font-size: 15px;
            color: #666;
            cursor: pointer;
            font-weight: 500;
            position: relative;
            padding-bottom: 5px;
        }

        .cat-btn.active {
            color: #fa7d3c;
            font-weight: bold;
        }

        .cat-btn.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 3px;
            background-color: #fa7d3c;
            border-radius: 2px;
        }

        /* --- 5. å†…å®¹å¡ç‰‡ --- */
        .card {
            background: #fff;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .user-info {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: #eee;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            overflow: hidden;
        }

        .user-meta {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: bold;
            color: #333;
            font-size: 15px;
        }

        .post-time {
            font-size: 12px;
            color: #939393;
            margin-top: 2px;
        }

        .post-content {
            font-size: 15px;
            line-height: 1.6;
            color: #333;
            margin-bottom: 12px;
            white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œ */
        }

        /* å›¾ç‰‡ç½‘æ ¼å¸ƒå±€ */
        .post-images {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .post-images img {
            height: 150px;
            object-fit: cover;
            border-radius: 4px;
            cursor: zoom-in;
            flex-grow: 1;
            max-width: 49%; /* é»˜è®¤ä¸¤åˆ— */
        }
        
        /* å¦‚æœåªæœ‰ä¸€å¼ å›¾ï¼Œå®½ä¸€ç‚¹ */
        .post-images.single-img img {
            max-width: 70%;
            height: auto;
            max-height: 400px;
        }

        .tag {
            color: #eb7350;
            cursor: pointer;
            margin-right: 4px;
        }
        
        .tag:hover {
            text-decoration: underline;
        }

        /* --- 6. å³ä¾§çƒ­æœ --- */
        .hot-board {
            background: #fff;
            padding: 0 20px 20px;
            border-radius: 8px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .hot-title {
            font-size: 16px;
            font-weight: bold;
            padding: 15px 0;
            border-bottom: 1px solid #f2f2f2;
            margin-bottom: 10px;
        }

        .hot-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            cursor: pointer;
            font-size: 14px;
        }

        .hot-item:hover .item-title {
            color: #fa7d3c;
            text-decoration: underline;
        }

        .rank {
            margin-right: 10px;
            font-weight: bold;
            width: 18px;
            text-align: center;
            color: #999;
            font-style: italic;
        }
        
        .rank.top-3 {
            color: #fa7d3c;
        }

        .hot-icon {
            background-color: #ff3e3e;
            color: white;
            font-size: 10px;
            padding: 1px 3px;
            border-radius: 2px;
            margin-left: 5px;
            font-weight: normal;
        }

        /* --- 7. ç¯ç®± (ç‚¹å‡»æ”¾å¤§) --- */
        .lightbox {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.85);
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .lightbox img {
            max-width: 90%;
            max-height: 90vh;
            border: 2px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #fff;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        .lightbox-caption {
            color: #fff;
            margin-top: 10px;
            font-size: 16px;
        }

    </style>
</head>
<body>

    <div class="navbar">
        <div class="nav-content">
            <div class="logo" onclick="location.reload()">TangBo</div>
            <div class="search-box">
                <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢å¤§å”ï¼šä½›å…‰å¯ºã€ä¸‰å½©ã€æ•¦ç…Œ...">
                <button class="search-btn" onclick="performSearch()">ğŸ”</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-feed">
            
            <div class="category-bar" id="categoryBar">
                <button class="cat-btn active" onclick="filterCategory('all', this)">å…¨éƒ¨</button>
                <button class="cat-btn" onclick="filterCategory('architecture', this)">ğŸ›ï¸ å»ºç­‘</button>
                <button class="cat-btn" onclick="filterCategory('sculpture', this)">ğŸ—¿ é›•å¡‘</button>
                <button class="cat-btn" onclick="filterCategory('crafts', this)">ğŸº å·¥è‰º</button>
                <button class="cat-btn" onclick="filterCategory('art', this)">ğŸ–Œï¸ ä¹¦ç”»</button>
            </div>

            <div id="feedContainer">
                </div>
        </div>

        <div class="sidebar">
            <div class="hot-board">
                <div class="hot-title">å¤§å”çƒ­æœæ¦œ</div>
                <div id="hotList"></div>
            </div>
        </div>
    </div>

    <div id="lightbox" class="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <img id="lightbox-img" src="">
        <div id="lightbox-caption" class="lightbox-caption"></div>
    </div>

    <script>
        // --- æ•°æ®æº (åŒ…å«çœŸå®å›¾ç‰‡URL) ---
        const database = [
            {
                id: 1,
                user: "äº”å°å±±ä½›å…‰å¯º",
                avatar: "ğŸ›ï¸",
                time: "2å°æ—¶å‰",
                category: "architecture",
                content: "ã€å¤§å”æœ¨æ„ä¹‹é­‚ã€‘#ä½›å…‰å¯ºä¸œå¤§æ®¿#\nå±¹ç«‹åƒå¹´è€Œä¸å€’ï¼Œæ–—æ‹±å±‚å å¦‚èŠ±å¼€ã€‚è¿™æ˜¯å¤§å”ç°å­˜æœ€å®ä¼Ÿçš„æœ¨ç»“æ„å»ºç­‘ã€‚æ¢æ€æˆå…ˆç”Ÿæ›¾è¨€ï¼šâ€œå¾—è§æ­¤å¯ºï¼Œå®ä¹ƒæ¯•ç”Ÿä¹‹å¹¸ã€‚â€\nè¿™ç§è±ªè¿ˆä¸å¤§æ°”ï¼Œåªæœ‰åœ¨é‚£ä¸ªæ—¶ä»£æ‰èƒ½è¯ç”Ÿã€‚",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/5/5e/Foguang_Temple_East_Hall.jpg/800px-Foguang_Temple_East_Hall.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Foguang_Temple_East_Hall_structure.jpg/800px-Foguang_Temple_East_Hall_structure.jpg"
                ]
            },
            {
                id: 2,
                user: "çš‡å®¶å†…åºœ",
                avatar: "ğŸº",
                time: "åˆšåˆš",
                category: "crafts",
                content: "ã€å›½å®é‰´èµã€‘#å…½é¦–ç›ç‘™æ¯#\nè¿™å¯æ˜¯æœ•æœ€å¿ƒçˆ±çš„é…’æ¯ï¼æè´¨æ˜¯æå…¶ç½•è§çš„ç¼ ä¸ç›ç‘™ï¼Œä¿è‰²å¤„ç†å¾—æ°åˆ°å¥½å¤„ã€‚å…½é¦–ä¼¼ç‰›éç‰›ï¼Œé‡‘è‰²çš„å˜´éƒ¨æ˜¯æµå£ã€‚å……æ»¡äº†è¥¿åŸŸé£æƒ…ï¼Œè¿™æ‰æ˜¯å¤§å”çš„å›½é™…èŒƒå„¿ï¼âœ¨ #ä½•å®¶æ‘çª–è— #å·¥è‰ºç¾æœ¯",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/2/23/Onyx_Rhyton_with_gold_mouth_Tang_Dynasty.jpg"
                ]
            },
            {
                id: 3,
                user: "é¾™é—¨çŸ³çªŸç ”ç©¶é™¢",
                avatar: "ğŸ—¿",
                time: "30åˆ†é’Ÿå‰",
                category: "sculpture",
                content: "#å¢èˆé‚£å¤§ä½›#\nå‡è§†è¿™åŒçœ¼ç›ï¼Œä½ çœ‹åˆ°äº†ä»€ä¹ˆï¼Ÿæ˜¯æ…ˆæ‚²ï¼Œæ˜¯å¨ä¸¥ï¼Œè¿˜æ˜¯æ­¦çš‡çš„æ°”åº¦ï¼Ÿ\nå¥‰å…ˆå¯ºçš„è¿™ç»„ç¾¤é›•ï¼Œä»£è¡¨äº†å”ä»£çŸ³åˆ»è‰ºæœ¯çš„æœ€é«˜å³°ã€‚è¡£çº¹æµç•…ï¼Œä½“æ€ä¸°è…´ï¼Œç¥æƒ…ç”ŸåŠ¨ã€‚ #ä¸–ç•Œé—äº§ #é›•å¡‘",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Longmen_Grottoes%2C_Luoyang%2C_China.jpg/800px-Longmen_Grottoes%2C_Luoyang%2C_China.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Vairocana_Buddha_Longmen.jpg/640px-Vairocana_Buddha_Longmen.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Longmen_Fengxian_Si_retouched.jpg/800px-Longmen_Fengxian_Si_retouched.jpg"
                ]
            },
            {
                id: 4,
                user: "é•¿å®‰ç”»é™¢å‘¨æ˜‰",
                avatar: "ğŸ–Œï¸",
                time: "1å°æ—¶å‰",
                category: "art",
                content: "æ–°ç”»äº†ä¸€å¹…ã€Šç°ªèŠ±ä»•å¥³å›¾ã€‹ã€‚\næ˜¥å¤ä¹‹äº¤ï¼Œå®«è‹‘ä¹‹ä¸­ã€‚è´µæ—å¥³å­ä»¬èº«ç€è–„çº±ï¼Œäº‘é«»é«˜è€¸ï¼Œå¤´æ’ç‰¡ä¸¹ã€‚æˆ‘è¦è¡¨ç°çš„ä¸ä»…æ˜¯ç¾ä¸½ï¼Œæ›´æ˜¯é‚£ç§æ…µæ‡’ã€é—²é€‚çš„ç››ä¸–æ°”åº¦ã€‚å¤§å”çš„çº¢ï¼Œæœ€æ˜¯åŠ¨äººã€‚ #ç¾æœ¯ #ä»•å¥³ç”»",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/Ladies_Wearing_Flowers.jpg/1280px-Ladies_Wearing_Flowers.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/e/ee/Beauties_Wearing_Flowers_IV.jpg"
                ]
            },
            {
                id: 5,
                user: "ä¸è·¯è¡Œè€…",
                avatar: "ğŸ«",
                time: "3å°æ—¶å‰",
                category: "crafts",
                content: "åœ¨é›†å¸‚ä¸Šçœ‹åˆ°è¿™ä¸€ç»„#å”ä¸‰å½©#éª†é©¼ä¿‘ï¼Œç®€ç›´æ´»çµæ´»ç°ï¼\né‚£æ˜‚é¦–å˜¶é¸£çš„æ ·å­ï¼Œä»¿ä½›åˆšä»ä¸ç»¸ä¹‹è·¯å½’æ¥ã€‚é»„ã€ç»¿ã€ç™½ä¸‰è‰²é‡‰å½©äº¤èï¼Œè¿™å°±æ˜¯â€œå¤§å”æµå…‰â€ã€‚èƒ¡äººéª‘é©¼ï¼Œè§è¯äº†ä¸œè¥¿æ–¹æ–‡åŒ–çš„äº¤èã€‚ #é™¶ç“· #ä¸‰å½©",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Tang_Sancai_Camel.jpg/640px-Tang_Sancai_Camel.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Tang_Sancai_Camel_2.JPG/640px-Tang_Sancai_Camel_2.JPG",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/4/41/CMOC_Treasures_of_Ancient_China_exhibit_-_tricolor_glazed_pottery_horse.jpg/640px-CMOC_Treasures_of_Ancient_China_exhibit_-_tricolor_glazed_pottery_horse.jpg"
                ]
            },
            {
                id: 6,
                user: "è«é«˜çªŸç”»åŒ ",
                avatar: "ğŸ¨",
                time: "5å°æ—¶å‰",
                category: "art",
                content: "#æ•¦ç…Œå£ç”»# åå¼¹çµç¶èˆå§¿ç¿©è·¹ã€‚\næˆ‘ä»¬åœ¨æ´çªŸçš„å¢™å£ä¸Šç»˜åˆ¶ä½›å›½ä¸–ç•Œã€‚è‰²å½©ç»šä¸½ï¼Œçº¿æ¡é£èˆã€‚ç‰¹åˆ«æ˜¯é£å¤©å½¢è±¡ï¼Œæ²¡æœ‰ç¿…è†€å´èƒ½å‡­ç©ºé£ç¿”ï¼Œå…¨é è¿™é•¿é•¿çš„é£˜å¸¦ï¼è¿™æ˜¯ä¸­å›½è‰ºæœ¯çš„æƒ³è±¡åŠ›ã€‚ #æ•¦ç…Œ #å£ç”»",
                images: [
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Feitian.jpg/640px-Feitian.jpg",
                    "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Mogao_Cave_61_Map_of_Mount_Wutai_Detail.jpg/800px-Mogao_Cave_61_Map_of_Mount_Wutai_Detail.jpg"
                ]
            }
        ];

        const hotTopics = [
            { title: "ä½•å®¶æ‘å‘ç°åƒä»¶é‡‘é“¶å™¨", heat: "5200ä¸‡", tag: "çˆ†" },
            { title: "ä¸Šå®˜å©‰å„¿å¢“å¿—é“­å‡ºåœŸ", heat: "4300ä¸‡", tag: "çƒ­" },
            { title: "æç™½æœç”«ä¸œéƒ½ç›¸ä¼š", heat: "3850ä¸‡", tag: "è" },
            { title: "é•¿å®‰åäºŒæ—¶è¾°æ¸¸ç©æŒ‡å—", heat: "3100ä¸‡", tag: "æ–°" },
            { title: "å”ä¸‰å½©ä¸ä»…æœ‰ä¸‰ç§é¢œè‰²", heat: "2900ä¸‡", tag: "" },
            { title: "ç„å¥˜æ³•å¸ˆè¯‘ç»è¿›åº¦", heat: "2500ä¸‡", tag: "" },
            { title: "é¢œçœŸå¿ä¹¦æ³•å±•", heat: "1800ä¸‡", tag: "" },
        ];

        // --- åˆå§‹åŒ– ---
        window.onload = function() {
            renderFeed(database);
            renderHotList();
        };

        // --- æ ¸å¿ƒé€»è¾‘ ---

        // æ¸²æŸ“ Feed æµ
        function renderFeed(data) {
            const container = document.getElementById('feedContainer');
            container.innerHTML = '';

            if (data.length === 0) {
                container.innerHTML = `
                    <div class="card" style="text-align:center; padding:40px; color:#999;">
                        <h3>ğŸº æš‚æ— ç›¸å…³å†…å®¹</h3>
                        <p>æ¢ä¸ªè¯è¯•è¯•ï¼Ÿæ¯”å¦‚â€œå»ºç­‘â€ã€â€œä¸‰å½©â€...</p>
                    </div>`;
                return;
            }

            data.forEach(item => {
                // å¤„ç†å›¾ç‰‡ï¼šå¦‚æœæ˜¯å•å›¾ï¼Œç»™äºˆç‰¹æ®Šæ ·å¼ç±»
                const imgClass = item.images.length === 1 ? 'post-images single-img' : 'post-images';
                
                let imagesHtml = `<div class="${imgClass}">`;
                item.images.forEach(imgUrl => {
                    // æ·»åŠ  onclick äº‹ä»¶è§¦å‘ç¯ç®±
                    imagesHtml += `<img src="${imgUrl}" onclick="openLightbox('${imgUrl}', '${item.content.substring(0, 20)}...')">`;
                });
                imagesHtml += '</div>';

                const html = `
                    <div class="card">
                        <div class="user-info">
                            <div class="avatar">${item.avatar}</div>
                            <div class="user-meta">
                                <span class="user-name">${item.user}</span>
                                <span class="post-time">${item.time}</span>
                            </div>
                        </div>
                        <div class="post-content">${highlightTags(item.content)}</div>
                        ${imagesHtml}
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        // æ¸²æŸ“çƒ­æœ
        function renderHotList() {
            const list = document.getElementById('hotList');
            hotTopics.forEach((topic, index) => {
                const rankClass = index < 3 ? 'top-3' : '';
                const tagHtml = topic.tag ? `<span class="hot-icon">${topic.tag}</span>` : '';
                
                list.innerHTML += `
                    <div class="hot-item" onclick="document.getElementById('searchInput').value='${topic.title}'; performSearch();">
                        <div style="display:flex; align-items:center;">
                            <span class="rank ${rankClass}">${index + 1}</span>
                            <span class="item-title">${topic.title}</span>
                            ${tagHtml}
                        </div>
                        <span style="color:#939393; font-size:12px;">${topic.heat}</span>
                    </div>
                `;
            });
        }

        // åˆ†ç±»ç­›é€‰åŠŸèƒ½
        function filterCategory(category, btnElement) {
            // 1. æ›´æ–°æŒ‰é’®æ ·å¼
            const buttons = document.querySelectorAll('.cat-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            btnElement.classList.add('active');

            // 2. ç­›é€‰æ•°æ®
            if (category === 'all') {
                renderFeed(database);
            } else {
                const filtered = database.filter(item => item.category === category);
                renderFeed(filtered);
            }
        }

        // æœç´¢åŠŸèƒ½
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            
            // æœç´¢æ—¶é‡ç½®åˆ†ç±»æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.cat-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.cat-btn:first-child').classList.add('active'); // å›åˆ°"å…¨éƒ¨"é«˜äº®ä½†æ˜¾ç¤ºæœç´¢ç»“æœ

            const filtered = database.filter(item => {
                return item.content.toLowerCase().includes(query) || 
                       item.user.toLowerCase().includes(query) ||
                       item.category.toLowerCase().includes(query);
            });
            renderFeed(filtered);
        }

        // è¾…åŠ©ï¼šé«˜äº® #æ ‡ç­¾#
        function highlightTags(text) {
            return text.replace(/#(.+?)#/g, '<span class="tag">#$1#</span>');
        }

        // --- ç¯ç®±åŠŸèƒ½ (Lightbox) ---
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCaption = document.getElementById('lightbox-caption');

        function openLightbox(src, caption) {
            lightboxImg.src = src;
            lightboxCaption.innerText = caption;
            lightbox.style.display = 'flex'; // ä½¿ç”¨ flex å±…ä¸­
            document.body.style.overflow = 'hidden'; // ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
        }

        function closeLightbox() {
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto'; // æ¢å¤æ»šåŠ¨
        }

        // ç»‘å®šæœç´¢æ¡†å›è½¦
        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            if (e.key === 'Enter') performSearch();
        });

    </script>
</body>
</html>